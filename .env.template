# ----------------------------
# FinIntel - Production Template
# Copy this file to `.env` and fill real values for each environment.
# ----------------------------

# Runtime
NODE_ENV=production
PORT=4000
LOG_LEVEL=info

# App URLs
APP_BASE_URL=https://app.example.com
API_BASE_URL=https://api.example.com
CORS_ORIGIN=https://app.example.com

# Database / Cache
DATABASE_URL=postgresql://finintel_app:<STRONG_DB_PASSWORD>@postgres-prod.internal:5432/finintel?schema=public
REDIS_URL=redis://redis-prod.internal:6379

# Auth mode
AUTH_MODE=required
AUTH_DEBUG=false

# JWT / OIDC verification
JWT_ISSUER=https://auth.example.com/realms/finintel
JWT_AUDIENCE=finintel-api
KEYCLOAK_JWKS_URI=https://auth.example.com/realms/finintel/protocol/openid-connect/certs

# OIDC token exchange (backend)
KEYCLOAK_TOKEN_URL=https://auth.example.com/realms/finintel/protocol/openid-connect/token
KEYCLOAK_CLIENT_ID=finintel-api
KEYCLOAK_CLIENT_SECRET=<STRONG_CLIENT_SECRET>

# OIDC public client (frontend)
OIDC_AUTHORITY=https://auth.example.com/realms/finintel
OIDC_CLIENT_ID=finintel-web
OIDC_REDIRECT_URI=https://app.example.com/oidc/callback
OIDC_POST_LOGOUT_REDIRECT_URI=https://app.example.com

# Storage mode: s3 | local
STORAGE_MODE=s3

# S3 (required when STORAGE_MODE=s3)
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=<AWS_ACCESS_KEY_ID>
AWS_SECRET_ACCESS_KEY=<AWS_SECRET_ACCESS_KEY>
AWS_S3_BUCKET=finintel-prod-reports
AWS_S3_ENDPOINT=
AWS_S3_FORCE_PATH_STYLE=false

# Local fallback (used only when STORAGE_MODE=local)
LOCAL_UPLOAD_DIR=/var/lib/finintel/uploads

# Security / ops
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW_SECONDS=60
SESSION_SECRET=<LONG_RANDOM_SESSION_SECRET>

S3_BUCKET=finintel-prod-reports
AWS_S3_BUCKET=finintel-prod-reports

